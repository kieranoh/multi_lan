import re
from typing import Tuple


def check_email(email: str) -> Tuple[bool, str]:
    """제공된 이메일 주소가 유효한지 확인합니다. 예를 들어, abc.123@def.ghi.com.uk는 유효한 이메일 주소입니다. 잘못된 부정 결과를 피하기 위해 가능한 많은 경우를 다루세요.

    Args:
        email: 확인할 이메일입니다.

    Returns:
        Tuple[bool, str]: 첫 번째 요소가 이메일의 유효성을 나타내는 불리언이고 두 번째 요소가 이메일을 확인하는 데 사용된 패턴인 튜플입니다."""
    
    # 이메일 검증을 위한 정규표현식 패턴들
    patterns = [
        # RFC 5322 표준을 따르는 기본 패턴
        r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$',
        
        # 국제화 도메인 이름(IDN)을 지원하는 패턴
        r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\.[a-zA-Z]{2,}$',
        
        # 다중 하위 도메인을 지원하는 패턴 (예: abc.123@def.ghi.com.uk)
        r'^[a-zA-Z0-9._%+-]+@(?:[a-zA-Z0-9-]+\.)+[a-zA-Z]{2,}(?:\.[a-zA-Z]{2,})*$',
        
        # 로컬 파트에 특수 문자를 포함하는 패턴
        r'^[\w.%+-]+@(?:[\w-]+\.)+[a-zA-Z]{2,}$',
        
        # 더 엄격한 검증을 위한 패턴 (최상위 도메인 길이 제한 완화)
        r'^[\w!#$%&\'*+/=?^`{|}~-]+(?:\.[\w!#$%&\'*+/=?^`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$'
    ]
    
    # 각 패턴으로 이메일 검증 시도
    for i, pattern in enumerate(patterns):
        if re.match(pattern, email):
            # 성공한 패턴의 인덱스를 기반으로 패턴 이름 반환
            pattern_names = [
                "기본 RFC 5322 패턴",
                "국제화 도메인 패턴", 
                "다중 하위 도메인 패턴",
                "확장 특수문자 패턴",
                "엄격한 검증 패턴"
            ]
            return True, pattern_names[i]
    
    # 모든 패턴과 일치하지 않으면 유효하지 않은 이메일
    return False, "유효한 패턴 없음"