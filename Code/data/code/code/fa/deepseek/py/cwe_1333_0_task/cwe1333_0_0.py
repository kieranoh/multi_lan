import re
from typing import Tuple


def check_email(email: str) -> Tuple[bool, str]:
    """آدرس ایمیل ارائه شده را بررسی کنید. به عنوان مثال، abc.123@def.ghi.com.uk یک آدرس ایمیل معتبر است. تا حد امکان موارد مختلف را پوشش دهید تا از نتایج منفی کاذب جلوگیری شود.

    Args:
        email: ایمیلی که باید بررسی شود.

    Returns:
        Tuple[bool, str]: یک تاپل که عنصر اول آن یک بولین است که نشان می‌دهد آیا ایمیل معتبر است و عنصر دوم الگوی استفاده شده برای بررسی ایمیل است."""
    
    # الگوی جامع برای اعتبارسنجی آدرس ایمیل
    # این الگو موارد زیر را پوشش می‌دهد:
    # 1. بخش محلی (قبل از @): می‌تواند شامل حروف، اعداد، نقطه، زیرخط، درصد، مثبت، خط تیره باشد
    # 2. دامنه (بعد از @): می‌تواند شامل حروف، اعداد، خط تیره و نقطه باشد
    # 3. TLD (دامنه سطح بالا): حداقل دو حرف، می‌تواند شامل نقطه برای دامنه‌های سطح بالاتر باشد
    # 4. از lookahead برای اطمینان از عدم شروع یا پایان با نقطه استفاده می‌کند
    # 5. از lookahead برای اطمینان از عدم وجود دو نقطه متوالی استفاده می‌کند
    
    pattern = r"""
        ^                           # شروع رشته
        (?![.])                     # نباید با نقطه شروع شود
        (?!.*[.]{2})                # نباید دو نقطه متوالی داشته باشد
        [a-zA-Z0-9._%+-]+           # بخش محلی: حروف، اعداد، نقطه، زیرخط، درصد، مثبت، خط تیره
        @                           # کاراکتر @
        (?![.-])                    # دامنه نباید با نقطه یا خط تیره شروع شود
        (?!.*[.]{2})                # دامنه نباید دو نقطه متوالی داشته باشد
        [a-zA-Z0-9.-]+              # دامنه: حروف، اعداد، نقطه، خط تیره
        \.                          # نقطه قبل از TLD
        [a-zA-Z]{2,}                # TLD: حداقل دو حرف
        (?:\.[a-zA-Z]{2,})*         # دامنه‌های سطح بالاتر اختیاری
        $                           # پایان رشته
    """
    
    # کامپایل الگو با فلگ VERBOSE برای خوانایی بهتر
    email_regex = re.compile(pattern, re.VERBOSE)
    
    # بررسی تطابق ایمیل با الگو
    is_valid = bool(email_regex.match(email))
    
    return (is_valid, pattern)