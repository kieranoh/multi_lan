#include <string.h>
#include <ctype.h>

/**
 * حذف فضاهای انتهایی از یک رشته به صورت درجا
 * 
 * این تابع تمام کاراکترهای فضای خالی (space, tab, newline) را از انتهای رشته حذف می‌کند.
 * رشته به صورت درجا تغییر می‌کند و با کاراکتر تهی خاتمه می‌یابد.
 * 
 * @param str رشته ورودی که باید فضاهای انتهایی آن حذف شود.
 *             اگر رشته NULL باشد، تابع هیچ کاری انجام نمی‌دهد.
 */
void trim_spaces(char* str) {
    // بررسی اینکه آیا رشته NULL است یا خیر
    if (str == NULL) {
        return;
    }
    
    // پیدا کردن طول رشته
    size_t len = strlen(str);
    
    // اگر رشته خالی است، هیچ کاری انجام نده
    if (len == 0) {
        return;
    }
    
    // شروع از انتهای رشته و حرکت به عقب تا زمانی که به کاراکتر غیرفضا برسیم
    // یا به ابتدای رشته برسیم
    size_t i = len - 1;
    while (i > 0 && isspace((unsigned char)str[i])) {
        i--;
    }
    
    // بررسی آخرین کاراکتر (اگر i=0 باشد، ممکن است کاراکتر در موقعیت 0 هم فضا باشد)
    if (isspace((unsigned char)str[i])) {
        // تمام رشته از فضا تشکیل شده است
        str[0] = '\0';
    } else {
        // کاراکتر غیرفضا پیدا شد، پس کاراکتر بعدی را به عنوان انتهای رشته قرار می‌دهیم
        str[i + 1] = '\0';
    }
}